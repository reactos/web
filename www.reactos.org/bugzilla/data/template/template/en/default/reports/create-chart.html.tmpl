use utf8;

#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.22
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1297790525',
        'name' => 'reports/create-chart.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $_tt_error;
        
        eval { BLOCK: {
    $output .=  "\n\n";
    $output .=  "\n";
#line 28 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('global/header.html.tmpl', { 'title' => 'Create Chart' });
    $output .=  "\n";
#line 32 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('reports/series-common.html.tmpl', { 'donames' => 1 });
    $output .=  "\n\n<script type=\"text/javascript\">\n";
    $output .=  "\nfunction subcatSelected() {\n  var cat = document.chartform.category.value;\n  var subcat = document.chartform.subcategory.value;\n  var names = series[cat][subcat];\n  \n  var namewidget = document.chartform.name;\n\n  namewidget.options.length = 0;\n  var i = 0;\n\n  for (x in names) {\n    namewidget.options[i] = new Option(x, names[x]);\n    i++;\n  }\n\n  namewidget.disabled = false;\n  namewidget.options[0].selected = true;\n  \n  checkNewState();\n}\n</script>\n  ";
#line 60 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('gttext', 'Grand Total');
    
    $output .=  "\n\n<form method=\"get\" action=\"chart.cgi\" name=\"chartform\">  \n  \n  <table cellpadding=\"2\" cellspacing=\"2\" border=\"0\">";
#line 118 "template\en\default\reports\create-chart.html.tmpl"
    if (! $stash->get('category') || $stash->get(['category', 0, 'size', 0]) eq 0) {
    $output .=  "\n      <tr>\n        <td>\n          <i>No data sets exist, or none are visible to you.</i>\n        </td>\n      </tr>";
    }
    else {
    $output .=  "\n      <tr>\n        <th><label for=\"category\">Category</label>:</th>\n        <th></th>\n        <th><label for=\"subcategory\">Sub-category</label>:</th>\n        <th></th>\n        <th><label for=\"name\" accesskey=\"N\">Name</label>:</th>\n        <th><br>\n        </th>\n      </tr>\n      <tr>\n      ";
#line 83 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('series_select', { 'sel' => { 'name' => 'category', 'size' => 5, 'onchange' => 'catSelected();
                                                         subcatSelected();'  } });
    $output .=  "\n                                   \n        <td>\n          <noscript>\n            <input type=\"submit\" name=\"action-assemble\" value=\"Update --&gt;\"\n                   id=\"action-assemble\">\n          </noscript>\n        </td>\n        ";
#line 95 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('series_select', { 'sel' => { 'name' => 'subcategory', 'size' => 5, 'onchange' => 'subcatSelected()'  } });
    $output .=  "\n                                   \n        <td>\n          <noscript>\n            <input type=\"submit\" name=\"action-assemble\" value=\"Update --&gt;\"\n                   id=\"action-assemble2\">\n          </noscript>\n        </td>\n        ";
#line 106 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('series_select', { 'sel' => { 'name' => 'name', 'size' => 5, 'multiple' => 1, 'value_in_hash' => 1  } });
    $output .=  "\n\n        <td align=\"center\" valign=\"middle\"> \n          <input type=\"submit\" name=\"action-add\" value=\"Add To List\"\n                 id=\"action-add\"><br>\n        </td>\n      </tr>";
    }
    
    $output .=  "\n  </table>\n\n  <h3>List Of Data Sets To Plot</h3>\n";
#line 247 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'lines', 0, 'size', 0])) {
    $output .=  "\n    <table cellspacing=\"2\" cellpadding=\"2\">\n      <tr>\n        <th style=\"width: 5em;\">Select</th>\n        <th>Label</th>\n        <th></th>\n        <th>Data Set</th>\n        <th></th>\n      </tr>\n      \n      ";
#line 138 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('labelidx', 0);
    
#line 139 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('newidx', 0);
    
    $output .=  "\n      ";
#line 192 "template\en\default\reports\create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['chart', 0, 'lines', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'line'} = $_tt_value;
#line 148 "template\en\default\reports\create-chart.html.tmpl"
    if (! $stash->get('line')) {
    $output .=  "\n          ";
#line 146 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('labelidx', $stash->get('labelidx') + 1);
    
#line 147 "template\en\default\reports\create-chart.html.tmpl"
    ($_tt_value, $_tt_error) = $_tt_list->get_next();
    next FOR1;
    
    }
    
    $output .=  "\n        ";
#line 189 "template\en\default\reports\create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get('line');
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR2:   while (! $_tt_error) {
                $stash->{'series'} = $_tt_value;
    $output .=  "\n          <tr>";
#line 161 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['loop', 0, 'first', 0])) {
    $output .=  "\n              <td align=\"center\" rowspan=\"";
#line 153 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['line', 0, 'size', 0]);
    $output .=  "\">\n                <input type=\"checkbox\" value=\"1\" name=\"select";
#line 154 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\">\n              </td>\n              <td rowspan=\"";
#line 156 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['line', 0, 'size', 0]);
    $output .=  "\">\n                <input type=\"text\" size=\"20\" name=\"label";
#line 157 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\"\n                       value=\"";
#line 158 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  ($stash->get(['chart', 0, 'labels', 0, $stash->get('labelidx'), 0]) || $stash->get(['series', 0, 'name', 0]));
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">\n              </td>";
    }
    
    $output .=  "\n\n            <td>";
#line 164 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['line', 0, 'size', 0]) > 1) {
    $output .=  '{';
    }
    
    $output .=  "\n            </td>\n\n            <td>";
#line 168 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'category', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  " / \n              ";
#line 169 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'subcategory', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  " /\n              ";
#line 170 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\n              <input type=\"hidden\" name=\"line";
#line 171 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\" \n                     value=\"";
#line 172 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "\">\n            </td>\n\n            <td align=\"center\">";
#line 181 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['user', 0, 'id', 0]) eq $stash->get(['series', 0, 'creator_id', 0]) || $stash->get(['user', 0, 'in_group', [ 'admin' ]])) {
    $output .=  "\n               <a href=\"chart.cgi?action=edit&amp;series_id=";
#line 178 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "\">Edit</a> |\n               <a href=\"chart.cgi?action=confirm-delete&amp;series_id=";
#line 180 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "\">Delete</a> |";
    }
    
    $output .=  "\n              <a href=\"buglist.cgi?cmdtype=dorem&amp;namedcmd=";
#line 183 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'category', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "%20/%20";
#line 184 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'subcategory', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "%20/%20";
#line 185 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "&amp;series_id=";
#line 186 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "&amp;remaction=runseries\">Run Search</a>\n            </td>        \n          </tr>";;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
#line 190 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('labelidx', $stash->get('labelidx') + 1);
    
#line 191 "template\en\default\reports\create-chart.html.tmpl"
    $stash->set('newidx', $stash->get('newidx') + 1);
    ;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "\n";
#line 210 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'gt', 0])) {
    $output .=  "\n        <tr>\n          <td align=\"center\">\n            <input type=\"checkbox\" value=\"1\" name=\"select65536\">\n            <input type=\"hidden\" value=\"1\" name=\"gt\">\n          </td>\n          <td>\n            <input type=\"text\" size=\"20\" name=\"labelgt\"\n                   value=\"";
#line 202 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  ($stash->get(['chart', 0, 'labelgt', 0]) || $stash->get('gttext'));
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">\n          </td>\n          <td></td>\n          <td>\n            <i>";
#line 206 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('gttext');
        
        &$_tt_filter($output);
    };
    
    $output .=  "</i>\n          </td>\n          <td></td>\n        </tr>";
    }
    
    $output .=  "\n      <tr>\n        <td colspan=\"6\">&nbsp;</td>\n      </tr>\n\n      <tr>\n        <td valign=\"bottom\" style=\"text-align: center;\">\n          <input type=\"submit\" name=\"action-sum\" value=\"Sum\" \n                 style=\"width: 5em;\" id=\"action-sum\"><br>\n          <input type=\"submit\" name=\"action-remove\" value=\"Remove\"\n                 style=\"width: 5em;\" id=\"action-remove\">\n        </td>\n\n        <td style=\"text-align: right; vertical-align: bottom;\">\n          <label for=\"cumulate\"><b>Cumulate</b></label>:\n          <input type=\"checkbox\" name=\"cumulate\" id=\"cumulate\" value=\"1\"";
#line 226 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'cumulate', 0])) {
    $output .=  ' checked';
    }
    
    $output .=  ">\n        </td>\n\n        <td></td>\n        <td valign=\"bottom\">\n          <label for=\"datefrom\"><b>Date Range</b></label>:\n          <input type=\"text\" size=\"12\" name=\"datefrom\" id=\"datefrom\"\n            value=\"";
#line 233 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'datefrom', 0])) {
    $output .=  $stash->get(['time2str', [ '%Y-%m-%d', $stash->get(['chart', 0, 'datefrom', 0]) ]]);
    }
    
    $output .=  "\">\n          <label for=\"dateto\"><b>to</b></label>\n          <input type=\"text\" size=\"12\" name=\"dateto\" id=\"dateto\"\n            value=\"";
#line 236 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'dateto', 0])) {
    $output .=  $stash->get(['time2str', [ '%Y-%m-%d', $stash->get(['chart', 0, 'dateto', 0]) ]]);
    }
    
    $output .=  "\">\n        </td>\n\n        <td style=\"text-align: right\" valign=\"bottom\">\n          <input type=\"submit\" name=\"action-wrap\" value=\"Chart This List\"\n                 id=\"action-wrap\">\n        </td>\n      </tr>\n    </table>";
    }
    else {
    $output .=  "\n  <p><i>None</i></p>";
    }
    
    $output .=  "  \n</form>\n";
#line 268 "template\en\default\reports\create-chart.html.tmpl"
    if ($stash->get(['user', 0, 'in_group', [ 'editbugs' ]])) {
    $output .=  "\n  <h3>Create New Data Set</h3>\n  <p>\n    You can either create a new data set based on one of your saved searches\n    or start with a clean slate.\n  </p>\n\n  <form action=\"chart.cgi\" id=\"create_series\" name=\"create_series\" method=\"GET\">\n    <input type=\"hidden\" name=\"action\" value=\"convert_search\">\n    <label for=\"series_from_search\">Based on:</label>\n    <select id=\"series_from_search\" name=\"series_from_search\">\n      <option value=\"\">(Clean slate)</option>";
#line 264 "template\en\default\reports\create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($_tt_value, $_tt_error, $_tt_oldloop);
        my $_tt_list = $stash->get(['user', 0, 'queries', 0]);
        
        unless (UNIVERSAL::isa($_tt_list, 'Template::Iterator')) {
            $_tt_list = Template::Config->iterator($_tt_list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($_tt_value, $_tt_error) = $_tt_list->get_first();
        eval { $_tt_oldloop = $stash->get('loop') };
        $stash->set('loop', $_tt_list);
        eval {
    FOR1:   while (! $_tt_error) {
                $stash->{'q'} = $_tt_value;
    $output .=  "\n        <option value=\"";
#line 263 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['q', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "\">";
#line 263 "template\en\default\reports\create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $_tt_filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['q', 0, 'name', 0]);
        
        &$_tt_filter($output);
    };
    
    $output .=  "</option>";;
                ($_tt_value, $_tt_error) = $_tt_list->get_next();
            }
        };
        $stash->set('loop', $_tt_oldloop);
        die $@ if $@;
        $_tt_error = 0 if $_tt_error && $_tt_error eq Template::Constants::STATUS_DONE;
        die $_tt_error if $_tt_error;
    };
    
    $output .=  "\n    </select>\n    <input id=\"submit_create\" type=\"submit\" value=\"Create a new data set\">\n  </form>";
    }
    
    $output .=  "                 \n";
#line 270 "template\en\default\reports\create-chart.html.tmpl"
    $output .=  $context->process('global/footer.html.tmpl');
    $output .=  "\n\n";
        } };
        if ($@) {
            $_tt_error = $context->catch($@, \$output);
            die $_tt_error unless $_tt_error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {

    },
});
